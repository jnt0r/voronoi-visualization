(()=>{"use strict";var t=function(){function t(t,o){this.x=t,this.y=o,this.fillStyle="#000",this.velocity_x=Math.floor(3*Math.random())+-1,this.velocity_y=Math.floor(3*Math.random())+-1;var i=Math.round(16777215*Math.random());this.color=("#0"+i.toString(16)).replace(/^#0([0-9a-f]{6})$/i,"#$1")}return t.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.angleTo=function(t){var o=this.x-t.x,i=this.y-t.y,n=Math.atan2(i,o);return n<0?n+2*Math.PI:n},t.prototype.tick=function(){(this.x<=0||this.x>=1920)&&(this.velocity_x*=-1),(this.y<=0||this.y>=919)&&(this.velocity_y*=-1),this.x+=.5*this.velocity_x,this.y+=.5*this.velocity_y},t.prototype.draw=function(t){t.beginPath(),t.arc(this.x,this.y,3,0,2*Math.PI,!1),t.fillStyle=this.fillStyle,t.fill(),t.closePath(),this.tick()},t}();const o=t;var i=function(){function t(t,o){this.from=t,this.to=o}return t.prototype.isEqualTo=function(t){return this.from.isEqualTo(t.from)&&this.to.isEqualTo(t.to)||this.from.isEqualTo(t.to)&&this.to.isEqualTo(t.from)},t}();const n=i,r=function(){function t(t,o,i){if(this.a=t,this.b=o,this.c=i,t.isEqualTo(o)||o.isEqualTo(i)||t.isEqualTo(i))throw console.log(t,o,i),new Error("triangle contains identical points!");if(t.x===o.x&&o.x===i.x||t.y==o.y&&o.y===i.y)throw console.log(t,o,i),new Error("triangle points lie on a straight!")}return t.prototype.isEqualTo=function(t){return(this.a.isEqualTo(t.a)||this.a.isEqualTo(t.b)||this.a.isEqualTo(t.c))&&(this.b.isEqualTo(t.a)||this.b.isEqualTo(t.b)||this.b.isEqualTo(t.c))&&(this.c.isEqualTo(t.a)||this.c.isEqualTo(t.b)||this.c.isEqualTo(t.c))},t.prototype.isPointInsideCircumcircle=function(t){var o=this.getCircumCenter();return Math.sqrt(Math.pow(Math.abs(t.x-o.x),2)+Math.pow(Math.abs(t.y-o.y),2))<=Math.sqrt(Math.pow(Math.abs(this.a.x-o.x),2)+Math.pow(Math.abs(this.a.y-o.y),2))},t.prototype.getCircumCenter=function(){var t=this.a.x,i=this.b.x,n=this.c.x,r=this.a.y,e=this.b.y,a=this.c.y,s=2*(t*(e-a)+i*(a-r)+n*(r-e)),h=1/s*((Math.pow(t,2)+Math.pow(r,2))*(e-a)+(Math.pow(i,2)+Math.pow(e,2))*(a-r)+(Math.pow(n,2)+Math.pow(a,2))*(r-e)),l=1/s*((Math.pow(t,2)+Math.pow(r,2))*(n-i)+(Math.pow(i,2)+Math.pow(e,2))*(t-n)+(Math.pow(n,2)+Math.pow(a,2))*(i-t));return new o(h,l)},t.prototype.getEdges=function(){var t=[];return t[0]=new n(this.a,this.b),t[1]=new n(this.b,this.c),t[2]=new n(this.c,this.a),t},t.prototype.sharesSamePointWith=function(t){return this.a.isEqualTo(t.a)||this.a.isEqualTo(t.b)||this.a.isEqualTo(t.c)||this.b.isEqualTo(t.a)||this.b.isEqualTo(t.b)||this.b.isEqualTo(t.c)||this.c.isEqualTo(t.a)||this.c.isEqualTo(t.b)||this.c.isEqualTo(t.c)},t.prototype.getPoints=function(){return[this.a,this.b,this.c]},t}();var e,a=(e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])},e(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)});const s=function(t){function o(o,i){var n=t.call(this,o,i)||this;return n.x=o,n.velocity_y=0,n.velocity_x=0,n.fillStyle=n.color,n}return a(o,t),o}(o);var h=function(t,o,i){if(i||2===arguments.length)for(var n,r=0,e=o.length;r<e;r++)!n&&r in o||(n||(n=Array.prototype.slice.call(o,0,r)),n[r]=o[r]);return t.concat(n||Array.prototype.slice.call(o))},l=document.getElementById("canvas"),u=l.getContext("2d");l.style.width="100%",l.style.height="100%",l.width=l.offsetWidth,l.height=l.offsetHeight;for(var c=l.clientWidth,f=l.clientHeight,y=[],p=50;p>0;p--)y.push(new o(Math.floor(Math.random()*c),Math.floor(Math.random()*f)));var w=new r(new s(0,0),new s(c,0),new s(0,f)),g=new r(new s(c,f),new s(c,0),new s(0,f));function v(t,o,i){for(var n=0,r=t;n<r.length;n++){var e=r[n];if(e!==i)for(var a=0,s=e.getEdges();a<s.length;a++)if(s[a].isEqualTo(o))return!1}return!0}y.push.apply(y,h(h([],w.getPoints(),!1),[new s(c,f)],!1)),window.requestAnimationFrame((function t(){u.clearRect(0,0,c,f),function(t){for(var i=[w,g],n=0,e=t;n<e.length;n++){for(var a=e[n],s=[],h=0,l=i;h<l.length;h++)(T=l[h]).isPointInsideCircumcircle(a)&&s.push(T);for(var c=[],f=0,p=s;f<p.length;f++)for(var T=p[f],E=0,x=I=T.getEdges();E<x.length;E++)v(s,P=x[E],T)&&c.push(P);for(var d=function(t){i.splice(i.findIndex((function(o){return o.isEqualTo(t)})),1)},q=0,M=s;q<M.length;q++)d(T=M[q]);for(var m=0,b=c;m<b.length;m++){var P=b[m];a.isEqualTo(P.from)||a.isEqualTo(P.to)||a.x===P.from.x&&P.from.x==P.to.x||a.y===P.from.y&&P.from.y==P.to.y||i.push(new r(a,P.from,P.to))}}for(var _=new Set,S=0,C=i;S<C.length;S++)if((T=C[S]).sharesSamePointWith(w)||T.sharesSamePointWith(g),!(T.a.isEqualTo(T.b)||T.b.isEqualTo(T.c)||T.a.isEqualTo(T.c)))for(var k=R(T),I=T.getEdges(),A=function(t){var o=t.getEdges();if(I.filter((function(t){return o.find((function(o){return o.isEqualTo(t)}))})).length>0){u.beginPath(),u.moveTo(k.x,k.y);var i=R(t);u.lineTo(i.x,i.y),u.strokeStyle="#000",u.stroke(),u.closePath(),u.strokeStyle="#000"}},O=0,W=i;O<W.length;O++)A(W[O]);var F=[];_.forEach((function(t){var o=y.flatMap((function(o){return{point:o,distance:o.distanceTo(t)}})),i=o.sort((function(t,o){return t.distance<=o.distance?-1:1}))[0].distance,n=o.filter((function(t){return Number(t.distance).toFixed(5)===Number(i).toFixed(5)})).map((function(t){return t.point}));F.push({center:t,points:n})}));for(var j=function(t){var i=F.filter((function(o){return 1===o.points.filter((function(o){return o.isEqualTo(t)})).length})).map((function(t){return t.center}));if(i.length){var n=0,r=0;i.forEach((function(t){n+=t.x,r+=t.y})),n/=i.length,r/=i.length;var e=new o(n,r);!function(t,o){u.beginPath(),u.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++)u.lineTo(t[i].x,t[i].y);u.lineTo(t[0].x,t[0].y),u.fillStyle=o.color,u.strokeStyle="#000",u.stroke(),u.fill(),u.closePath()}(i=i.map((function(t){return new o(t.x-e.x,t.y-e.y)})).sort((function(t,i){var n=t.angleTo(new o(0,0)),r=i.angleTo(new o(0,0));return n<r||n==r&&t.distanceTo(new o(0,0))<i.distanceTo(new o(0,0))?1:-1})).map((function(t){return new o(t.x+e.x,t.y+e.y)})),t)}},H=0,N=y;H<N.length;H++)j(N[H]);for(var $=0,B=y;$<B.length;$++)(a=B[$]).draw(u);function R(t){var o=t.getCircumCenter();return _.has(o)||_.add(o),o}}(y),window.requestAnimationFrame(t)})),l.onclick=function(t){var i=new o(t.x,t.y);y.push(i)}})();