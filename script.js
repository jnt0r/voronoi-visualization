(()=>{"use strict";var t=function(){function t(t,i){this.x=t,this.y=i,this.velocity_x=Math.floor(3*Math.random())+-1,this.velocity_y=Math.floor(3*Math.random())+-1;var n=Math.round(16777215*Math.random());this.color=("#0"+n.toString(16)).replace(/^#0([0-9a-f]{6})$/i,"#$1")}return t.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.angleTo=function(t){var i=this.x-t.x,n=this.y-t.y,o=Math.atan2(n,i);return o<0?o+2*Math.PI:o},t.prototype.tick=function(){(this.x<=0||this.x>=1920)&&(this.velocity_x*=-1),(this.y<=0||this.y>=919)&&(this.velocity_y*=-1),this.x+=.5*this.velocity_x,this.y+=.5*this.velocity_y},t.prototype.draw=function(t){t.beginPath(),t.arc(this.x,this.y,3,0,2*Math.PI,!1),t.fillStyle="#000",t.fill(),t.closePath(),this.tick()},t}();const i=t;var n=function(){function t(t,i){this.from=t,this.to=i}return t.prototype.isEqualTo=function(t){return this.from.isEqualTo(t.from)&&this.to.isEqualTo(t.to)||this.from.isEqualTo(t.to)&&this.to.isEqualTo(t.from)},t}();const o=n,e=function(){function t(t,i,n){this.a=t,this.b=i,this.c=n}return t.prototype.isEqualTo=function(t){return(this.a.isEqualTo(t.a)||this.a.isEqualTo(t.b)||this.a.isEqualTo(t.c))&&(this.b.isEqualTo(t.a)||this.b.isEqualTo(t.b)||this.b.isEqualTo(t.c))&&(this.c.isEqualTo(t.a)||this.c.isEqualTo(t.b)||this.c.isEqualTo(t.c))},t.prototype.isPointInsideCircumcircle=function(t){var i=this.getCircumCenter();return Math.sqrt(Math.pow(Math.abs(t.x-i.x),2)+Math.pow(Math.abs(t.y-i.y),2))<=Math.sqrt(Math.pow(Math.abs(this.a.x-i.x),2)+Math.pow(Math.abs(this.a.y-i.y),2))},t.prototype.getCircumCenter=function(){var t=this.a.x,n=this.b.x,o=this.c.x,e=this.a.y,a=this.b.y,r=this.c.y,s=2*(t*(a-r)+n*(r-e)+o*(e-a)),h=1/s*((Math.pow(t,2)+Math.pow(e,2))*(a-r)+(Math.pow(n,2)+Math.pow(a,2))*(r-e)+(Math.pow(o,2)+Math.pow(r,2))*(e-a)),u=1/s*((Math.pow(t,2)+Math.pow(e,2))*(o-n)+(Math.pow(n,2)+Math.pow(a,2))*(t-o)+(Math.pow(o,2)+Math.pow(r,2))*(n-t));return new i(h,u)},t.prototype.getEdges=function(){var t=[];return t[0]=new o(this.a,this.b),t[1]=new o(this.b,this.c),t[2]=new o(this.c,this.a),t},t.prototype.sharesSamePointWith=function(t){return this.a.isEqualTo(t.a)||this.a.isEqualTo(t.b)||this.a.isEqualTo(t.c)||this.b.isEqualTo(t.a)||this.b.isEqualTo(t.b)||this.b.isEqualTo(t.c)||this.c.isEqualTo(t.a)||this.c.isEqualTo(t.b)||this.c.isEqualTo(t.c)},t}();var a=document.getElementById("canvas"),r=a.getContext("2d");a.style.width="100%",a.style.height="100%",a.width=a.offsetWidth,a.height=a.offsetHeight;for(var s=a.clientWidth,h=a.clientHeight,u=[],c=50;c>0;c--)u.push(new i(Math.floor(Math.random()*s),Math.floor(Math.random()*h)));var l=new e(new i(0,0),new i(s,0),new i(0,h)),f=new e(new i(s,h),new i(s,0),new i(0,h));function p(t,i,n){for(var o=0,e=t;o<e.length;o++){var a=e[o];if(a!==n)for(var r=0,s=a.getEdges();r<s.length;r++)if(s[r].isEqualTo(i))return!1}return!0}window.requestAnimationFrame((function t(){r.clearRect(0,0,2*s,2*h),function(t){for(var n=[l,f],o=0,a=t;o<a.length;o++){for(var s=a[o],h=[],c=0,y=n;c<y.length;c++)(k=y[c]).isPointInsideCircumcircle(s)&&h.push(k);for(var w=[],v=0,g=h;v<g.length;v++)for(var T=0,d=(k=g[v]).getEdges();T<d.length;T++)p(h,b=d[T],k)&&w.push(b);for(var M=function(t){n.splice(n.findIndex((function(i){return i.isEqualTo(t)})),1)},E=0,x=h;E<x.length;E++)M(k=x[E]);for(var q=0,m=w;q<m.length;q++){var b=m[q];n.push(new e(s,b.from,b.to))}}for(var P=new Set,S=0,C=n;S<C.length;S++){var k;if(!(k=C[S]).sharesSamePointWith(l)&&!k.sharesSamePointWith(f))for(var I=z(k),_=k.getEdges(),W=function(t){var i=t.getEdges();if(_.filter((function(t){return i.find((function(i){return i.isEqualTo(t)}))})).length>0){r.beginPath(),r.moveTo(I.x,I.y);var n=z(t);r.lineTo(n.x,n.y),r.strokeStyle="#000",r.stroke(),r.closePath(),r.strokeStyle="#000"}},F=0,A=n;F<A.length;F++)W(A[F])}var H=[];P.forEach((function(t){var i=u.flatMap((function(i){return{point:i,distance:i.distanceTo(t)}})),n=i.sort((function(t,i){return t.distance<=i.distance?-1:1}))[0].distance,o=i.filter((function(t){return Number(t.distance).toFixed(5)===Number(n).toFixed(5)})).map((function(t){return t.point}));H.push({center:t,points:o})}));for(var N=function(t){var n=H.filter((function(i){return 1===i.points.filter((function(i){return i.isEqualTo(t)})).length})).map((function(t){return t.center}));if(n.length>0){var o=0,e=0;n.forEach((function(t){o+=t.x,e+=t.y})),o/=n.length,e/=n.length;var a=new i(o,e);!function(t,i){r.beginPath(),r.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)r.lineTo(t[n].x,t[n].y);r.lineTo(t[0].x,t[0].y),r.fillStyle=i.color,r.strokeStyle="#000",r.stroke(),r.fill(),r.closePath()}(n=n.map((function(t){return new i(t.x-a.x,t.y-a.y)})).sort((function(t,n){var o=t.angleTo(new i(0,0)),e=n.angleTo(new i(0,0));return o<e||o==e&&t.distanceTo(new i(0,0))<n.distanceTo(new i(0,0))?1:-1})).map((function(t){return new i(t.x+a.x,t.y+a.y)})),t)}},$=0,B=u;$<B.length;$++)N(B[$]);for(var R=0,j=u;R<j.length;R++)(s=j[R]).draw(r);function z(t){var i=t.getCircumCenter();return P.has(i)||P.add(i),i}}(u),window.requestAnimationFrame(t)})),a.onclick=function(t){var n=new i(t.x,t.y);u.push(n)}})();